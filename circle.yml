machine:
  services:
    - docker
  environment:
    DOCKER_HOST: "45.32.55.64:2376"  # temporary
    DOCKER_API_VERSION: "1.23"

dependencies:
  pre:
    - docker pull ubuntu:16.04
    - pip install ansible ansible-lint docker-py

test:
  override:
    - docker run -d --name web ubuntu:16.04 /bin/sleep 3600
    - ansible-playbook -i inventory_docker web.yml test.yml --syntax-check
    - ansible-lint test.yml
    - ansible-playbook -i inventory_docker web.yml test.yml -l running
